---
title: "Serverless Static Websites in AWS â€” a 2020 Guide
"
date: 2020-05-22T22:14:27-05:00
draft: true
---

This is a writeup on how I build this site. I wanted a highly reliable, cost effective and low maintenance way of getting my content out. After checking out options like GitHub pages, Netlify etc, I decided to settle for AWS as my preferred way. Although GitHub pages initially seemed to be what I was looking for, they had a very opinionated branching strategy for personal sites (content source code cannot be in master branch) and the GitHub actions was buggy and not production worthy. After losing patience with GitHub pages, I settled down with AWS which I was familiar with and had past success on. The ability to have control over a customized disaster recovery, better performance via CloudFront CDN and complete serverless deployment also helped the case of AWS.

This guide shows how to do a serverless static website deployment in AWS using [AWS Serverless Application Model](https://aws.amazon.com/serverless/sam/) and how to create an automated continuos integration and continuos delivery pipeline. We will use Hugo to create a static site, but the same can be extended to Angular, React, GatsbyJS or any other static sites. We will be leveraging AWS SAM to deploy this static website in a serverless manner. Static assets will be stored in AWS S3 and content served by CloudFront's worldwide edge servers providing blazing fast content delivery to consumers. The source code for the site will be stored in GitHub and we will use AWS Code Builder to automatically build and deploy the site whenever a change is pushed to Github.

Let's get introduced to few technologies that we will use in this guide.

### Hugo

[Hugo](https://gohugo.io/) is a static website generator. You can write your content in Markdown format and hugo converts them into HTML format and applies a theme while doing it. There are no databases to maintain and all content are served as pre-created HTML files. The resultant HTML files can be served using any httpd server like apache or nginx with minimal configuration. But in our case, we will store the HTML files in S3 and serve the content via CloudFront servers.

### AWS SAM

[AWS SAM](https://aws.amazon.com/serverless/sam/) is framework for building serverless applications leveraging multiple AWS technologies. In its heart, it consist of a infrastructure configuration file (can be represented in JSON or YAML formats) which is a superset of AWS CloudFormation syntax and a command line interface (sam-cli). SAM provides an easy way to declare serverless compute like Lambda functions, AppSync, S3, DynamoDB, API gateway etc and deploy them.

### AWS S3

[AWS Simple Storage Service](https://aws.amazon.com/s3/) is an object storage service. We will be using S3 to store HTML files generated by Hugo. S3 supports static site hosting out of box, however this requires that we make the bucket publicly accessible. This also makes it difficult to add multi-region disaster recovery for our sites. Instead, we will lock down the bucket tightly and give permission to CloudFront alone to access the contents of this bucket.

### AWS CloudFront

[AWS CloudFront](https://aws.amazon.com/cloudfront/) is a Content Delivery Network (CDN) that delivers content to customers globally with low latency and high transfer speeds. In our case, CloudFront will act as the web server serving HTML pages, CSS, JS files, Images etc. CloudFront fetches data from S3 and caches at edge nodes that are closer to customers across the globe.

### AWS CodeDeploy

[AWS CodeDeploy](https://aws.amazon.com/codedeploy/) is part of AWS Developer tools. In function, it is equivalent to a Serverless Jenkins server. If listens to changes in your code repository (GitHub in our case) and builds the code and generates the HTML artifacts. It also pushes the HTML pages to our destination S3 buckets. This decouples the content writers from the whole AWS ecosystem. Content writes can push updated Markdown files to GitHub and CodeDeploy works behind the scene to automatically build the HTML pages using Hugo and publishing it to production.
